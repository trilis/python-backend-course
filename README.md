# RabbitMQ для ML-модели

## Бизнес-сценарий

Есть ML-модель, которая рисует красивые картины по текстовому описанию, но делает это медленно. Необходимо сделать API для этой модели, при этом запрос на отрисовку должен не зависать, а приниматься на обработку и выдавать результат позже, по другому запросу.

## Реализация

При получении запроса возвращается только id запроса, по которому в дальнейшем можно будет проверить статус. Запрос отправляется как сообщение (RabbitMQ) одному из worker-ов, который запускает модель. После конца обработки запроса worker записывает результат в базу данных (MongoDB).

## Запуск

### Сборка

```
poetry install
```

### Запуск RabbitMQ и MongoDB

```
docker-compose build
docker-compose up -d
```

### Запуск сервера

```
poetry run uvicorn src.main:app
```

### Запуск worker-а

```
poetry run python src/worker.py
```

### Тестирование

```
poetry run pytest
```