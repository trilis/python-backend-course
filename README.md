# Сравнение СУБД

## Бизнес-сценарий

Необходимо автоматизировать работу налоговой службы. В течение налогового периода компании отправляют в систему налоговые декларации, а после завершения периода налоговая должна проверить декларации на корректность и выявить несоответствия и неуплаты. Также (представим, что у нас очень продвинутая налоговая) необходимо по предоставленным данным о транзакциям обнаружить случаи возможного отмывания денег (например, методами машинного обучения) и предоставить их в правоохранительные органы.

## Рассмотренные СУБД

### MySQL

Плюсы:
* Самая популярная СУБД в мире
* Одна из лучших по производительности при небольших размерах ДБ
* Хорошо поддерживает репликацию

Минусы:
* Сложно расширяемая
* Производительность сильно падает при увеличении размеров таблиц
* Не полностью опен-сорс

MySQL лучше всего подходит для приложений относительно небольшого по данным размера, в которых важна производительность.

### PostgreSQL

Плюсы:
* Поддерживает сложные типы данных (такие как массивы, композитные типы)
* Объектно-реляционная СУБД, например, поддерживает такие ООП-концепции как наследование таблиц и перегрузка функций
* Поддержка параллелизма внутри запроса

Минусы:
* По бенчмаркам медленнее, чем MySQL
* Оверхед на подключения (каждое подключение создаёт отдельный процесс)

PostgreSQL подходит для больших баз данных со сложными запросами, но может проигрывать по производительности более легковесным решениям.

### MongoDB

Плюсы:
* Подходит как для структурированных, так и для неструктурированных данных, так как не является реляционной СУБД и не требует схемы
* Хорошо горизонтально расширяема, легко поддерживает репликацию
* Отлично подходит для данных в виде документов, позволяет индексировать документы, из-за чего к ним можно быстро обращаться

Минусы:
* Не поддерживает из коробки объединение таблиц
* Почти не поддерживает транзакции
* Большие затраты на диск и на оперативную память (для индексов)

MongoDB лучше всего подходит для неструктурированных данных в виде JSON-документов, в том числе если этих данных очень много.

## Принятое решение

Финансовые отчёты являются достаточно структурированными данными (состоят из таких сущностей как деньги, даты, финансовые транзакции, участников сделки и т.д.), поэтому необходимость в неструктурированной СУБД отпадает. Каждый пользователь отправляет декларацию только один раз за налоговый период (который обычно равен месяцу или нескольким), налоговая анализирует данные тоже раз в период, поэтому производительность не является критическим фактором. С другой стороны, налоговые правила для крупных компаний бывают достаточно сложными и порождать сложные запросы к СУБД, а работа по поиску отмывания денег точно будет порождать сложные запросы. Исходя из изложенного, рекомендуется выбрать **PostgreSQL**.